<!-- index.html -->
{% extends 'base.html' %} {% block content %}
<div class="container-fluid">
  <div class="glassmorfismo text-center mb-3">
    <div class="card-header">
      <h1>Información del clima</h1>
    </div>
    <div class="card-body">
      <div class="cargando">
        <div
          class="spinner-grow mb-4"
          style="width: 3rem; height: 3rem"
          role="status"
        >
          <span class="sr-only">Loading...</span>
        </div>
      </div>
      <div id="contenido-clima" style="display: none">
        <p class="h4">
          El pronóstico de <strong><span id="ciudad"></span></strong> para hoy
          es
        </p>
        <p id="pronostico">
          <span class="h1"><i id="icono" class="h1 fas"></i></span
          >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
            id="descripcion"
            class="h5 pt-3 position-absolute translate-middle-y"
          ></span>
        </p>
        <br />
        <p>
          La temperatura actual es de &nbsp;<span
            class="h4"
            id="temperatura"
          ></span
          >°C
        </p>
        <br />
        <div class="container">
          <div class="row position-relative">
            <div class="col">
              <p class="light-font position-relative translate-middle-y">
                Probabilidad de lluvia <br /><br /><span
                  class="h5"
                  id="probLluvia"
                ></span
                >%
              </p>
            </div>
            <div class="col">
              <p class="light-font position-relative translate-middle-y">
                Nubosidad actual<br /><br /><span
                  class="h5"
                  id="nubosidad"
                ></span
                >%
              </p>
            </div>
            <div class="col">
              <p class="light-font position-relative translate-middle-y">
                Nivel de humedad<br /><br /><span
                  class="h5"
                  id="humedad"
                ></span
                >%
              </p>
            </div>
            <div class="col">
              <p class="light-font position-relative translate-middle-y">
                Índice UV actual<br /><br /><span
                  class="h5"
                  id="uvActual"
                ></span>
              </p>
            </div>
          </div>
        </div>

        <hr />

        <div class="container mt-4">
          <p class="h4">Además esperamos:</p>
          <br />
          <div class="row px-5">
            <div class="col">
              <p class="light-font2" class="light-font">
                Una temperatura máxima de<br /><span class="h5 pt-5" id="temp_max"></span
                >°C
              </p>
            </div>
            <div class="col">
              <p class="light-font2">
                Una temperatura mínimas de<br /><span class="h5 pt-5" id="temp_min"></span
                >°C
              </p>
            </div>
          </div>
          <div class="row px-5">
            <div class="col">
              <p class="light-font2">
                Índice UV máximo para el día<br /><span
                  class="h5 pt-5"
                  id="uv_max"
                ></span>
              </p>
            </div>
          </div>
        </div>
      </div>

      <div
        id="svgWrapper"
        class="mt-2 mb-4 text-center animate__animated animate__heartBeat animate__repeat-3"
        style="display: none"
      >
        <img
          class="animate__animated animate__heartBeat animate__repeat-2 animate__delay-4s"
          id="svgError"
          src="{{ url_for('static', filename='svg/error.svg') }}"
          alt="Geo error"
        />
      </div>

      <div id="mensaje-error" style="display: none" class="text-left ml-4">
        <p class="text-warning">
          ⚠️ No se pudo obtener la información del clima.
        </p>
        <p id="autoriza" class="text-danger d-none">
          ⛔ Debes autorizar el acceso a tu ubicación. Si no sabes cómo te dejo
          el siguiente
          <a
            class="text-primary"
            target="_blank"
            href="https://support.google.com/chrome/answer/142065?hl=Es-419&ref_topic=7439541"
            style="cursor: pointer"
            >Link</a
          >.
        </p>
        <p class="text-success d-none authOk">
          ✅ Si ya autorizaste los permisos de ubicación puedes recargar la
          página para obtener tus resultados
        </p>
        <div class="text-center mt-4">
          <button
            class="btn btn-primary d-none authOk"
            onclick="window.location.reload(true);"
          >
            Recargar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    function mostrarMensaje() {
      setTimeout(() => {
        $("#autoriza").removeClass("d-none");
        setTimeout(() => {
          $(".authOk").removeClass("d-none");
        }, 6000);
      }, 2000);
    }

    mostrarMensaje();
  });
</script>

{% endblock %}
