<!-- index.html -->
{% extends 'base.html' %} {% block content %}
<div class="container-fluid">
  <div id="carousel" class="owl-carousel" style="display: none;">
    <div class="item">
      <!-- Card del clima -->
      <div class="text-center mb-4 mx-auto">
        <div class="glassmorfismo card-body">
          <div class="cargando">
            <div
              class="spinner-grow mb-4"
              style="width: 3rem; height: 3rem;"
              role="status"
            >
              <span class="sr-only">Loading...</span>
            </div>
          </div>
          <div class="contenido-clima" style="display: none;">
            <div id="pronostico" class="card-header">
              <h3>
                El pronóstico para hoy es
              </h3>
              <hr />
              
              <p class="h4"></p>
              <span class="h1"><i id="icono" class="h1 fas"></i></span>
              <br />
              <p id="descripcion" class="h5 pt-3 text-center"></p>
              <p
              class="pt-3 h4 font-weight-bold"
              >
                La temperatura actual es de &nbsp;<strong
                  id="temperatura"
                  ></strong>
                </p>
                <small id="dia_consulta"></small> <br>
                <small class="fs-6 fw-light">Actualizado a las: <span id="formatted_hora"></span> hrs</small>
              <hr />
              <div class="container-fluid mt-4">
                <div class="row mt-lg-3 mt-md-3 mt-sm-2">
                  <div class="col-6 mx-auto py-4">
                    <p
                      class="light-font position-relative translate-middle-y py-4"
                    >
                      Posibilidad de lluvia<br /><br /><span
                        class="h5"
                        id="probLluvia"
                      ></span>
                    </p>
                  </div>
                  <div class="col-6 mx-auto py-4">
                    <p
                      class="light-font position-relative translate-middle-y py-4"
                    >
                      Nubosidad actual<br /><br /><span
                        class="h5"
                        id="nubosidad"
                      ></span>
                    </p>
                  </div>
                </div>
                <div class="row mt-lg-3 mt-md-3 mt-sm-2">
                  <div class="col col-md-6 col-sm-6 mx-auto">
                    <p class="light-font position-relative translate-middle-y">
                      Índice UV<br /><br /><span
                        class="h5"
                        id="uvActual"
                      ></span>
                    </p>
                  </div>
                  <div class="col col-md-6 col-sm-6">
                    <p class="light-font position-relative translate-middle-y">
                      Nivel de humedad<br /><br /><span
                        class="h5"
                        id="humedad"
                      ></span>
                    </p>
                  </div>
                </div>
              </div>

              <hr />

              <div class="container mt-4">
                <p class="h4">Además esperamos:</p>
                <br />
                <div class="row justify-content-center">
                  <div class="col-6 col-lg-6 col-sm-12 w-100">
                    <p class="light-font">
                      T° máxima:<br /><br /><span
                        class="h5 pt-5"
                        id="temp_max"
                      ></span>
                    </p>
                  </div>
                  <div class="col-6 col-lg-6 col-sm-12 w-100">
                    <p class="light-font">
                      T° mínima:<br /><br /><span
                        class="h5 pt-5"
                        id="temp_min"
                      ></span>
                    </p>
                  </div>
                </div>
                <div class="row mt-lg-3 mt-md-3 mt-sm-2">
                  <div class="col-12 col-lg-6 mx-auto w-100">
                    <p class="light-font">
                      Índice UV máximo<br /><br /><span
                        class="h5"
                        id="uv_max"
                      ></span>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Segunda Card-->
    <div class="item">
      <div class="glassmorfismo text-center mb-3">
        <div class="card-body">
          <div class="cargando">
            <div
              class="spinner-grow mb-4"
              style="width: 3rem; height: 3rem;"
              role="status"
            >
              <span class="sr-only">Loading...</span>
            </div>
          </div>
          <div class="contenido-clima" style="display: none;">
            <div id="pronostico" class="card-header">
              <h3 class="mb-4">
                <strong class="ciudad"></strong> mañana estará:
              </h3>
              <hr />
              <p class="h4"></p>
              <span class="h1"><i id="icono2" class="h1 fas"></i></span>
              <br />
              <p id="descripcion2" class="h5 pt-3 text-center"></p>
              <hr />
              <div class="container my-5">
                <div class="row mt-lg-4 my-md-3 my-sm-5">
                  <div class="col">
                    <p class="light-font position-relative translate-middle-y">
                      T° máxima:
                      <br /><br />
                      <span
                        class="h5 pt-5 position-relative translate-middle-y"
                        id="temperatura_max2"
                      ></span>
                    </p>
                  </div>
                  <div class="col">
                    <p class="light-font position-relative translate-middle-y">
                      T° mínima:<br /><br /><span
                        class="h5 pt-5 position-relative translate-middle-y"
                        id="temperatura_min2"
                      ></span>
                    </p>
                  </div>
                </div>
                <div class="row px-lg-4 mt-lg-4 mt-md-3 mt-sm-2">
                  <div class="col mx-auto">
                    <p class="light-font position-relative translate-middle-y">
                      Probabilidad de lluvia <br /><br />
                      <span class="h5" id="probabilidad_lluvia2"></span>
                    </p>
                  </div>
                </div>
                <div class="row px-lg-4 mt-lg-4 mt-md-3 mt-sm-2">
                  <div class="col mx-auto">
                    <p class="light-font position-relative translate-middle-y">
                      Índice UV máximo para el día<br /><br /><span
                        class="h5 pt-5 position-relative translate-middle-y"
                        id="uv_index_max2"
                      ></span>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="glassmorfismo text-center mb-3">
  <div
    id="svgWrapper"
    class="mt-2 mb-4 text-center animate__animated animate__heartBeat animate__repeat-3"
    style="display: none;"
  >
    <img
      class="animate__animated animate__heartBeat animate__repeat-2 animate__delay-4s"
      id="svgError"
      src="{{ url_for('static', filename='svg/error.svg') }}"
      alt="Geo error"
    />
  </div>

  <div id="mensaje-error" style="display: none;" class="text-left ml-4">
    <p class="text-warning">⚠️ No se pudo obtener la información del clima.</p>
    <p id="autoriza" class="text-danger d-none">
      ⛔ Debes autorizar el acceso a tu ubicación. Si no sabes cómo te dejo el
      siguiente
      <a
        class="text-primary"
        target="_blank"
        href="https://support.google.com/chrome/answer/142065?hl=Es-419&ref_topic=7439541"
        style="cursor: pointer;"
        >Link
      </a>
    </p>
    <p class="text-success d-none authOk">
      ✅ Si ya autorizaste los permisos de ubicación puedes recargar la página
      para obtener tus resultados
    </p>
    <div class="text-center mt-4">
      <button
        class="btn btn-primary d-none authOk"
        onclick="window.location.reload(true);"
      >
        Recargar
      </button>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    function mostrarMensaje() {
      setTimeout(() => {
        $("#autoriza").removeClass("d-none");
        setTimeout(() => {
          $(".authOk").removeClass("d-none");
        }, 6000);
      }, 2000);
    }

    mostrarMensaje();
  });
</script>
{% endblock %}
