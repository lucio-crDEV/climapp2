<!-- index.html -->
{% extends 'base.html' %} {% block content %}
<div class="container-fluid">
  <div class="card text-white bg-dark text-center mb-3">
    <div class="card-header">
      <h2>Información del clima</h2>
    </div>
    <div class="card-body">
      <div class="cargando">
        <div
          class="spinner-grow mb-4"
          style="width: 3rem; height: 3rem"
          role="status"
        >
          <span class="sr-only">Loading...</span>
        </div>
      </div>
      <div id="contenido-clima" style="display: none">
        <p>
          El pronóstico para <strong><span id="ciudad"></span></strong> es
          principalmente
        </p>
        <p id="pronostico">
          <span class="h1"
            ><i id="icono" class="h1 fas"></i></span
          >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
            id="descripcion"
            class="h5 pt-3 position-absolute translate-middle-y"
          ></span>
        </p>
        <br />
        <p>
          La temperatura actual es de &nbsp;<span
            class="h4"
            id="temperatura"
          ></span
          >°C
        </p>
        <br>
        <div class="container">
          <div class="row">
            <div class="col"><p class="light-font">La probabilidad de lluvia hoy es de <br><br><span class="h5" id="probLluvia"></span>%</p></div>
            <div class="col"><p class="light-font">La nubosidad actual es de <br><br><span class="h5" id="nubosidad"></span>%</p></div>
            <div class="col"><p class="light-font">La humedad actual es de <br><br><span class="h5" id="humedad"></span>%</p> </div>
            <div class="col"><p class="light-font">
              El indice UV actual es <br><br><span class="h5" id="uvActual"></span>
            </p></div>
          </div>
        </div>


        
        <hr />
        <p>Además esperamos:</p>
        <p class="h6">Una máxima de: <span id="temp_max"></span>°C</p>
        <p class="h6">Una mínimas de: <span id="temp_min"></span>°C</p>
        <p class="h6">Un índice UV de: <span id="uv_max"></span></p>
      </div>

      <div
        id="svgWrapper"
        class="mt-2 mb-4 text-center animate__animated animate__heartBeat animate__repeat-3"
        style="display: none"
      >
        <img
          class="animate__animated animate__heartBeat animate__repeat-2 animate__delay-4s"
          id="svgError"
          src="{{ url_for('static', filename='svg/error.svg') }}"
          alt="Geo error"
        />
      </div>

      <div id="mensaje-error" style="display: none" class="text-left ml-4">
        <p class="text-warning">
          ⚠️ No se pudo obtener la información del clima.
        </p>
        <p id="autoriza" class="text-danger d-none">
          ⛔ Debes autorizar el acceso a tu ubicación. Si no sabes cómo te dejo
          el siguiente
          <a
            class="text-primary"
            target="_blank"
            href="https://support.google.com/chrome/answer/142065?hl=Es-419&ref_topic=7439541"
            style="cursor: pointer"
            >Link</a
          >.
        </p>
        <p class="text-success d-none authOk">
          ✅ Si ya autorizaste los permisos de ubicación puedes recargar la
          página para obtener tus resultados
        </p>
        <div class="text-center mt-4">
          <button
            class="btn btn-primary d-none authOk"
            onclick="window.location.reload(true);"
          >
            Recargar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    function mostrarMensaje() {
      setTimeout(() => {
        $("#autoriza").removeClass("d-none");
        setTimeout(() => {
          $(".authOk").removeClass("d-none");
        }, 6000);
      }, 2000);
    }

    mostrarMensaje();
  });
</script>

{% endblock %}
